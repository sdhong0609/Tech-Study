# 핸들러 & 루퍼 (Handler & Looper)
안드로이드의 UI 처리는 싱글 스레드 모델로 동작합니다. 이는 여러 스레드에서 공유된 자원에 동시에 접근하면 발생하는 동기화 문제 때문입니다. 여러 스레드에서 TextView, Button 같은 UI 컴포넌트에 동시에 접근하면 충돌이 발생합니다.그래서 안드로이드 UI 처리는 메인 스레드에서만 일어나야만 하며, 이 때문에 메인 스레드를 UI 스레드라고도 부릅니다.<br>
하지만 시간이 오래 걸리는 작업들은 ANR 문제 때문에 메인 스레드가 아닌 워커 스레드에서 이루어져야 하는데, 이 작업들의 결과는 결국엔 보통 UI를 업데이트하는 데에 사용됩니다. 하지만 별도의 스레드에서 UI 처리를 하면 안되기 때문에 안드로이드에서는 스레드 간의 통신을 위해 핸들러와 루퍼라는 장치를 제공합니다.

### 메시지 큐 & 메시지 (Message Queue & Message)
스레드 내에는 메시지 큐라는 것이 존재하는데 해당 스레드가 처리해야 할 이벤트가 메시지라는 형태로 하나씩 쌓이게 됩니다.<br>

### 핸들러 (Handler)
핸들러는 특정 메시지를 루퍼의 메시지 큐에 넣거나, 루퍼가 메시지 큐에서 특정 메시지를 꺼내어 전달하면 이를 처리하는 기능을 수행합니다.<br>
메시지 큐에 메시지를 넣을 때는, post() 메서드와 sendMessage() 메서드로 각각 Runnable 객체와 Message 객체를 넣을 수 있습니다.

### 루퍼 (Looper)
루퍼는 루프를 돌면서 메시지 큐에 들어오는 메시지들을 하나씩 꺼내어서 이를 핸들러로 전달하는 역할을 합니다.<br>
메시지를 꺼냈을 때, Runnable 객체이면 해당 Runnable의 run() 메서드를 호출하여 작업을 실행하고, Message 객체이면 핸들러에 메시지를 전달하여, 핸들러에서 handleMessage() 메서드로 메시지를 처리합니다.<br>
(* 참고 : 메인 스레드에서 생성된 핸들러에 의해 호출된 것이기 때문에 해당 UI 작업들(메시지 처리)은 메인 스레드에서 동작하고 문제없이 UI 처리가 가능하다.)

<br>
<br>


![image](https://github.com/sdhong0609/tech-interview-study/assets/78577085/55e0adea-671e-489c-9725-80c811a97c7e)

<br>
<br>
<br>

![image](https://github.com/sdhong0609/tech-interview-study/assets/78577085/5ecdb378-7370-49d6-bc8d-7810fec2a057)
